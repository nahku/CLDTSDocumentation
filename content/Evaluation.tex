
\chapter{Validation}\label{sec:Validation}
show advantages and useful for tptp users...
show size before after 
\section{Comment association}\label{sec:ValidationCommentAssociation}
comment association


\section{Automated parser generation}\label{sec:ValidationAutomatedParserGeneration}
A goal of using the software tool is to be able to use an extracted sub-syntax with the automated parser generator for the \ac{TPTP} syntax \cite{VS06}.
To ensure compatibility it is possible to export an extracted sub-syntax and adding the part of the syntax concerning comments, even though it is not reachable in the original syntax (see section \ref{sec:ConceptAutomatedParserGenerator}). If this part of the syntax would not be part of the output sub-syntax file automated parser generation would result in an error because this syntax part is expected to be present.\\
Also, the automated parser generator is used to check if the output sub-syntax follows the original \ac{TPTP} syntax format.

\subsection{Building a basic parser}\label{sec:ValidationAutomatedParserGenerationBuildingBasicParser}
To demonstrate the usability and capability of the tool a parser parsing only \ac{CNF}, that counts the number of \ac{CNF} clauses, is used.
The creation of the parser can be divided in the following steps:
\begin{enumerate}%[noitemsep]
	\item Extract the \ac{CNF} sub-syntax from the original \ac{TPTP} syntax to use the software tool.
	\item Generate lex and yacc file based on the sub-syntax using the automated parser generator.
	\item Modify the generated yacc parser to count \ac{CNF} clauses.
\end{enumerate}

\subsubsection{\ac{CNF} sub-syntax extraction}\label{sec:ValidationAutomatedParserGenerationBuildingBasicParserSubSyntax}
The following listing \ref{lst:ValidationParserControlFile} contains the control file content, that extracts \ac{CNF} from the TPTP syntax version 7.3.0.0.
The start symbol is \textit{TPTP\textunderscore file}.
\begin{lstlisting}[language = None, caption= Control file to extract \ac{CNF}, label= lst:ValidationParserControlFile]
<TPTP_file>
<annotated_formula>,::=,0,1,2,3,5
<annotations>,::=,0
\end{lstlisting}

All productions except the \textit{cnf\textunderscore annotated} are disabled from the \textit{annotated\textunderscore formula} grammar rule (line 2 of listing \ref{lst:ValidationParserControlFile}).
The \textit{annotated\textunderscore formula} grammar rule can be seen in the following listing \ref{lst:ValidationParserAnnotatedFormulaProductions}.
\begin{lstlisting}[language = None,caption= \textit{annotated\textunderscore formula} production rule, label= lst:ValidationParserAnnotatedFormulaProductions]
<annotated_formula>    ::= <thf_annotated> | <tff_annotated> | <tcf_annotated> |
                           <fof_annotated> | <cnf_annotated> | <tpi_annotated>
\end{lstlisting}

todo describe annotations rule

To extract the \ac{CNF} sub-syntax using the control file content from listing \ref{lst:ValidationParserControlFile} either the command-line interface or the GUI can be used.

\subsubsection{Lex and yacc file generation}\label{sec:ValidationAutomatedParserGenerationBuildingBasicParserGenerateFiles}
The generated sub-syntax is input to the automated parser generator.
The automated parser generates generates  a lex and yacc file, and also the corresponding c files from that.

\subsubsection{\ac{CNF} clause counter implementation}\label{sec:ValidationAutomatedParserGenerationBuildingBasicParserClauseCounter}
To count the \ac{CNF} clauses the counter $cnf\textunderscore counter$ has been added to the parser.
Also a main function is added, that can be seen in listing \ref{lst:ValidationParserMainFunction}.
Using this function, either a file can be passed to the parser, or the input can be provided via the command-line.
After parsing is complete, the total number of \ac{CNF} clauses is output to the console.

\begin{lstlisting}[language=c, basicstyle=\scriptsize	,caption= \ac{CNF} parser main-function,label= lst:ValidationParserMainFunction]
 int main(int argc, char **argv ){
    ++argv, --argc;  /* skip over program name */
    if(argc>0){
        yyin = fopen(argv[0],"r");
    }
    else{
        yyin = stdin;
    }
    yyparse();
    printf("Total count of cnf clauses: %d\n", cnf_counter);
}
\end{lstlisting}
The incrementation of the \textit{cnf\textunderscore counter} is done in the yacc rule-action, that has been created  by the automated parser generator, for the \textit{cnf\textunderscore annotated} symbol.

\subsection{Testing the generated parser}\label{sec:ValidationAutomatedParserGeneration}
The generated parser has been successfully tested on \ac{TPTP} problems.
It returns an error if other logics than \ac{CNF} are present and correctly counts the number of \ac{CNF} clauses.

The automated parser generator can be used with any sub-syntax generated by the tool, for example sub-syntaxes with \ac{FOF}, or \ac{FOF} and \ac{CNF}.

\section{Syntax size comparison}\label{sec:ValidationSyntaxSizeComparison}
- original number of rules
- cnf number of rules
- only reachable symbols counted

Table \ref{tbl:ConceptTPTPProductionSymbols} contains the number of rules and productions alternatives for the original \ac{TPTP} syntax and the extracted sub-syntax.

- \ac{CNF} and \ac{FOF} circa 40 \% number of rules, 35 \% of rule alternatives

- \ac{CNF} only circa 33 \% number of rules, 28 \% rule alternatives

\begin{table}[H]
\centering
\renewcommand{\arraystretch}{1.5}
\caption{\ac{TPTP} syntax size comparison}
\begin{tabular}{lll}
\textbf{Syntax} & \textbf{Number of rules} & \textbf{Number of rule alternatives}\\\hline
Full \ac{TPTP} syntax & 285 & 594\\
\ac{CNF} and \ac{FOF} & 113 & 206\\
\ac{CNF} only & 93 & 164
\end{tabular}
\label{tbl:ConceptTPTPProductionSymbols}
\end{table}

- singnificant reduction
